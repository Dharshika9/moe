{"version":3,"sources":["../../src/migrations/v002.js"],"names":["migration","Migration","toVersion","fromVersionRange","migrate","state","serialized","document","key"],"mappings":";;;;;;AAAA;;AACA;;;;;;AACA,IAAMA,YAAY,IAAIC,kBAAJ,CAAc;AAC9BC,aAAW,OADmB;AAE9BC,oBAAkB,QAFY;AAG9BC,WAAS,wBAAS;AAChB;AACAC,8BACKA,KADL,EAEMA,MAAMC,UAAN,GACA,EAAEA,YAAY,EAAEC,UAAUF,MAAMC,UAAlB,EAAd,EADA,GAEA,EAJN;AAMA;AACAD,YAAQ,8BAAOA,KAAP,EAAc,eAAO;AAC3B,cAAQG,GAAR;AACE,aAAK,MAAL;AACE,iBAAO,QAAP;AACF,aAAK,QAAL;AACE,iBAAO,QAAP;AACF;AACE,iBAAOA,GAAP;AANJ;AAQD,KATO,CAAR;AAUA,WAAOH,KAAP;AACD;AAvB6B,CAAd,CAAlB;;kBA0BeL,S","file":"v002.js","sourcesContent":["import { Migration } from 'ory-editor-core/lib/service/plugin/classes'\nimport rename from 'deep-rename-keys'\nconst migration = new Migration({\n  toVersion: '0.0.2',\n  fromVersionRange: '^0.0.1',\n  migrate: state => {\n    // wrap with document\n    state = {\n      ...state,\n      ...(state.serialized\n        ? { serialized: { document: state.serialized } }\n        : {})\n    }\n    // rename keys\n    state = rename(state, key => {\n      switch (key) {\n        case 'kind':\n          return 'object'\n        case 'ranges':\n          return 'leaves'\n        default:\n          return key\n      }\n    })\n    return state\n  }\n})\n\nexport default migration\n"]}