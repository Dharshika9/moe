{"version":3,"sources":["../../src/plugins/emphasize.js"],"names":["STRONG","EM","U","createButton","type","icon","editorState","onChange","onClick","e","preventDefault","value","change","toggleMark","isActive","activeMarks","some","mark","EmphasizePlugin","name","schema","marks","onKeyDown","data","state","isMod","key","hoverButtons","deserialize","el","next","tagName","toLowerCase","object","nodes","childNodes","serialize","children","renderMark","props","attributes","Plugin"],"mappings":"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","file":"emphasize.js","sourcesContent":["/*\n * This file is part of ORY Editor.\n *\n * ORY Editor is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ORY Editor is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with ORY Editor.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @license LGPL-3.0\n * @copyright 2016-2018 Aeneas Rekkas\n * @author Aeneas Rekkas <aeneas+oss@aeneas.io>\n *\n */\n\n/* eslint-disable prefer-reflect, default-case, react/display-name */\nimport React from 'react'\nimport BoldIcon from '@material-ui/icons/FormatBold'\nimport ItalicIcon from '@material-ui/icons/FormatItalic'\nimport UnderlinedIcon from '@material-ui/icons/FormatUnderlined'\nimport { makeTagMark, ToolbarButton } from '../helpers'\nimport Plugin from './Plugin'\nimport type { Props } from './props'\n\nexport const STRONG = 'EMPHASIZE/STRONG'\nexport const EM = 'EMPHASIZE/EM'\nexport const U = 'EMPHASIZE/U'\n\n// eslint-disable-next-line react/display-name\nconst createButton = (type, icon) => ({ editorState, onChange }: Props) => {\n  const onClick = e => {\n    e.preventDefault()\n    onChange({\n      value: editorState.change().toggleMark(type).value\n    })\n  }\n\n  const isActive =\n    editorState && editorState.activeMarks.some(mark => mark.type === type)\n\n  return <ToolbarButton onClick={onClick} isActive={isActive} icon={icon} />\n}\n\nexport default class EmphasizePlugin extends Plugin {\n  props: Props\n\n  name = 'emphasize'\n\n  schema = {\n    marks: {\n      [STRONG]: makeTagMark('strong'),\n      [EM]: makeTagMark('em'),\n      [U]: makeTagMark('u')\n    }\n  }\n\n  onKeyDown = (e: Event, data: { key: string, isMod: boolean }, state) => {\n    if (data.isMod) {\n      let mark\n\n      switch (data.key) {\n        case 'b':\n          mark = STRONG\n          break\n        case 'i':\n          mark = EM\n          break\n        case 'u':\n          mark = U\n          break\n        default:\n          return\n      }\n\n      return state.change().toggleMark(mark).value\n    }\n  }\n\n  hoverButtons = [\n    createButton(STRONG, <BoldIcon />),\n    createButton(EM, <ItalicIcon />),\n    createButton(U, <UnderlinedIcon />)\n  ]\n\n  deserialize = (el, next) => {\n    switch (el.tagName.toLowerCase()) {\n      case 'strong':\n      case 'b':\n        return {\n          object: 'mark',\n          type: STRONG,\n          nodes: next(el.childNodes)\n        }\n      case 'em':\n      case 'i':\n        return {\n          object: 'mark',\n          type: EM,\n          nodes: next(el.childNodes)\n        }\n      case 'u':\n        return {\n          object: 'mark',\n          type: U,\n          nodes: next(el.childNodes)\n        }\n    }\n  }\n\n  serialize = (object: { type: string, object: string }, children: any[]) => {\n    if (object.object !== 'mark') {\n      return\n    }\n    switch (object.type) {\n      case STRONG:\n        return <strong>{children}</strong>\n      case EM:\n        return <em>{children}</em>\n      case U:\n        return <u>{children}</u>\n    }\n  }\n\n  renderMark = props => {\n    const { children, mark, attributes } = props\n\n    switch (mark.type) {\n      case STRONG:\n        return <strong {...attributes}>{children}</strong>\n      case EM:\n        return <em {...attributes}>{children}</em>\n      case U:\n        return <u {...attributes}>{children}</u>\n    }\n  }\n}\n"]}